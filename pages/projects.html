<!DOCTYPE html>
<meta charset="UTF-8">
<html lang="en-US">

<head>
    <title>Projects</title>

    {meta}
</head>

<body>
    {nav}

    <main>
        <h1>Projects</h1>

        <p id="loadingprojects">Loading projects..</p>
        <div id="projectslist" class="hidden"></div>

        <script>
            fetch("https://api.kaleko.ga/v2/github/projects/json/").then(res => res.json()).then(repos => {
                repos.forEach(repo => {
                    var element = document.createElement("p")
                    element.innerHTML = (repo.homepage != "" ? '<a href="' + repo.homepage + '">' + repo.name.replace(/-/g, " ") + "</a>" : repo.name.replace(/-/g, " ")) + " - " + repo.description + ' <a href="' + repo.url + '">(Source)</a>'

                    document.getElementById("projectslist").appendChild(element)
                })

                document.getElementById("loadingprojects").setAttribute("class", "hidden")
                document.getElementById("projectslist").removeAttribute("class")
            })
        </script>
    </main>

    {global}
</body>

</html>